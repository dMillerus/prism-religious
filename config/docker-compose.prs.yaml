# Prism Religious Studies (PRS) Services
# Usage: docker compose -f compose.yaml -f prism-religious/config/docker-compose.prs.yaml up -d

services:
  prism-religious-ui:
    build:
      context: ./prism-religious/ui
      dockerfile: docker/Dockerfile
      args:
        - VITE_PRISM_API_URL=http://localhost:8100
        - VITE_OLLAMA_API_URL=http://localhost:11434
    container_name: prism-religious-ui
    restart: unless-stopped
    ports:
      - "127.0.0.1:3003:3000"
    environment:
      - NODE_ENV=production
    networks:
      - aiml-net
    depends_on:
      prism:
        condition: service_healthy
      ollama:
        condition: service_started
    deploy:
      resources:
        limits:
          cpus: "1.0"
          memory: 512M
        reservations:
          memory: 128M

networks:
  aiml-net:
    external: true
    name: aiml-stack_aiml-net
